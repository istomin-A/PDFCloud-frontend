!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&"SCRIPT"===s.currentScript.tagName.toUpperCase()&&(e=s.currentScript.src),!e)){var o=s.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"}();class e{selectors={modalPath:"[data-js-modal-path]",modalButtonClose:"[data-js-modal-close]"};dataAttributes={modalTarget:"data-js-modal-target",modalPath:"data-js-modal-path"};stateClases={isActive:"_active",isLock:"_lock"};constructor(t){this.rootElement=t,this.modalPath=document.querySelectorAll(this.selectors.modalPath),this.modalButtonClose=this.rootElement.querySelector(this.selectors.modalButtonClose),this.bindEvents()}toggleClasses(){this.rootElement.classList.toggle(this.stateClases.isActive),document.body.classList.toggle(this.stateClases.isLock)}modalOpen=t=>{let e=t.currentTarget.getAttribute(this.dataAttributes.modalPath);this.rootElement.getAttribute(this.dataAttributes.modalTarget)===e&&(this.toggleClasses(),this.rootElement.showModal())};modalClose=t=>{this.rootElement.classList.contains("_active")&&(this.toggleClasses(),this.rootElement.close())};modalCancel=t=>{this.rootElement.classList.contains("_active")&&(this.toggleClasses(),this.rootElement.close())};modalCloseOverlay=t=>{const e=t.currentTarget;t.target===e&&(this.toggleClasses(),this.rootElement.close())};bindEvents(){this.modalPath.forEach(t=>t.addEventListener("click",this.modalOpen)),this.modalButtonClose.addEventListener("click",this.modalClose),this.rootElement.addEventListener("cancel",this.modalCancel),this.rootElement.addEventListener("click",this.modalCloseOverlay)}}var s=t.p+"img/logo/pdf-logo.b1d915cd5c1a1fe9c166.svg";const o="[data-js-spoller]";class r{timeAnimationMS=300;selectors={root:o,button:"[data-js-spoller-button]",icon:"[data-js-spoller-icon]",body:"[data-js-spoller-body]"};stateClases={isActive:"_active"};stateAttributes={style:"style",open:"open"};inlineStyles={hidden:"hidden",transition:`max-height ${this.timeAnimationMS}ms ease-in-out`,block:"block",none:"none"};constructor(t){this.rootElement=t,this.spollerButton=this.rootElement.querySelector(this.selectors.button),this.spollerIcon=this.rootElement.querySelector(this.selectors.icon),this.spollerBody=this.rootElement.querySelector(this.selectors.body),this.initSpoller()}updateSpollerClasses(t){this.spollerButton.classList.toggle(this.stateClases.isActive,t),this.spollerBody.classList.toggle(this.stateClases.isActive,t),this.spollerIcon?.classList.toggle(this.stateClases.isActive,t)}toggleSpoller=t=>{t.preventDefault();const e=this.rootElement.hasAttribute(this.stateAttributes.open);this.spollerBody.style.overflow=this.inlineStyles.hidden,this.spollerBody.style.transition=this.inlineStyles.transition,this.updateSpollerClasses(!e),e?(this.spollerBody.style.maxHeight=this.spollerBody.scrollHeight+"px",this.spollerBody.offsetHeight,this.spollerBody.style.maxHeight="0px",setTimeout(()=>{this.spollerBody.removeAttribute(this.stateAttributes.style),this.spollerBody.style.display=this.inlineStyles.none,this.rootElement.removeAttribute(this.stateAttributes.open)},this.timeAnimationMS)):(this.rootElement.open=!e,this.spollerBody.style.display=this.inlineStyles.block,this.spollerBody.style.maxHeight="0px",this.spollerBody.style.maxHeight=this.spollerBody.scrollHeight+"px",setTimeout(()=>this.spollerBody.removeAttribute(this.stateAttributes.style),this.timeAnimationMS))};initSpoller(){const t=this.rootElement.hasAttribute(this.stateAttributes.open);t||(this.spollerBody.style.display=this.inlineStyles.none),this.updateSpollerClasses(t),this.spollerButton.addEventListener("click",this.toggleSpoller)}}var i,n;i=function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(n=new Image).onload=n.onerror=function(){i(2==n.height)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",new class{selectors={root:"[data-js-header]",headerBody:"[data-js-header-body]",menu:"[data-js-menu]",burger:"[data-js-burger]",menuLinks:"[data-js-menu-link]"};stateClasses={isActive:"_active",isLock:"_lock"};ariaAttribute={ariaExpanded:"aria-expanded",ariaLabel:"aria-label"};stateAriaAttribute={ariaExpandedTrue:!0,ariaExpandedFalse:!1,ariaLabelOpen:"Open menu",ariaLabelClose:"Close menu"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.headerBodyElement=this.rootElement.querySelector(this.selectors.headerBody),this.menuElement=this.rootElement.querySelector(this.selectors.menu),this.burgerElement=this.rootElement.querySelector(this.selectors.burger),this.menuLinksElements=this.rootElement.querySelectorAll(this.selectors.menuLinks),this.bindEvents())}clickMenuLinks=()=>{document.body.classList.remove(this.stateClasses.isLock),this.burgerElement.classList.remove(this.stateClasses.isActive),this.menuElement.classList.remove(this.stateClasses.isActive),this.burgerElement.setAttribute(this.ariaAttribute.ariaExpanded,this.stateAriaAttribute.ariaExpandedFalse),this.burgerElement.setAttribute(this.ariaAttribute.ariaLabel,this.stateAriaAttribute.ariaLabelOpen)};toggleBurger=()=>{this.burgerElement.classList.toggle(this.stateClasses.isActive),this.menuElement.classList.toggle(this.stateClasses.isActive),document.body.classList.toggle(this.stateClasses.isLock),this.burgerElement.setAttribute(this.ariaAttribute.ariaExpanded,this.stateAriaAttribute.ariaExpandedFalse),this.burgerElement.setAttribute(this.ariaAttribute.ariaLabel,this.stateAriaAttribute.ariaLabelOpen),this.burgerElement.classList.contains(this.stateClasses.isActive)&&(this.burgerElement.setAttribute(this.ariaAttribute.ariaExpanded,this.stateAriaAttribute.ariaExpandedTrue),this.burgerElement.setAttribute(this.ariaAttribute.ariaLabel,this.stateAriaAttribute.ariaLabelClose),this.menuLinksElements.forEach(t=>t.addEventListener("click",this.clickMenuLinks)))};scrollHeader=()=>{window.scrollY>=50?(this.rootElement.classList.add("_scroll"),this.headerBodyElement.classList.add("_scroll")):(this.rootElement.classList.remove("_scroll"),this.headerBodyElement.classList.remove("_scroll"))};bindEvents(){this.burgerElement.addEventListener("click",this.toggleBurger),window.addEventListener("scroll",this.scrollHeader)}},new class{constructor(){this.init()}init(){document.querySelectorAll("[data-js-modal-target]").forEach(t=>new e(t))}},new class{selectors={root:"[data-js-admin]",inputUsername:"[data-js-admin-username]",inputPassword:"[data-js-admin-password]",buttonSubmit:"[data-js-admin-button]"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.inputUsernameElement=this.rootElement.querySelector(this.selectors.inputUsername),this.inputPasswordElement=this.rootElement.querySelector(this.selectors.inputPassword),this.buttonSubmitElement=this.rootElement.querySelector(this.selectors.buttonSubmit),this.adminLogin())}postData(t){fetch("https://pdfcloud-server.onrender.com/api/adminLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>{if(!t.ok)throw new Error(`Ошибка: ${t.status}`);return t.json()}).then(t=>{console.log("Ответ от сервера:",t),t.success?(alert("Вход выполнен успешно!"),localStorage.setItem("isAdmin","true"),window.location.href="/PDFCloud-frontend/build/admin.html"):alert("Ошибка: "+t.message)}).catch(t=>{console.error("Ошибка при отправке:",t)})}clickButton=t=>{t.preventDefault();const e={username:this.inputUsernameElement.value,password:this.inputPasswordElement.value};this.postData(e)};adminLogin(){this.buttonSubmitElement.addEventListener("click",this.clickButton)}},new class{selectors={root:"[data-js-admin-panel]",logOut:"[data-js-admin-log-out]",formUploadingPDF:"[data-js-uploading-pdf]",formAddUser:"[data-js-add-user]",formDeleteUser:"[data-js-delete-user]",formEditUser:"[data-js-edit-user]",formAdminSearch:"[data-js-admin-search]"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&("true"!==localStorage.getItem("isAdmin")&&(window.location.href="/PDFCloud-frontend/build/adminLogin.html"),this.buttonLogOut=document.querySelector(this.selectors.logOut),this.logOut(),this.formUploadingPDF=this.rootElement.querySelector(this.selectors.formUploadingPDF),this.uploadPdf(),this.formAddUser=this.rootElement.querySelector(this.selectors.formAddUser),this.addUser(),this.formDeleteUser=this.rootElement.querySelector(this.selectors.formDeleteUser),this.deleteUser(),this.formEditUser=this.rootElement.querySelector(this.selectors.formEditUser),this.editUser(),this.formAdminSearch=this.rootElement.querySelector(this.selectors.formAdminSearch),this.search())}logOut(){this.buttonLogOut.addEventListener("click",t=>{localStorage.removeItem("isAdmin"),window.location.href="/PDFCloud-frontend/build/adminLogin.html"})}uploadPdf(){this.formUploadingPDF.addEventListener("submit",t=>{t.preventDefault();const e=this.formUploadingPDF.querySelector('input[type="file"]').files[0],s=new FormData;s.append("pdf",e),fetch("https://pdfcloud-server.onrender.com/api/upload-pdf",{method:"POST",body:s}).then(t=>t.json()).then(t=>{t.success&&alert("Документ успешно загружен в базу")}).catch(console.error)})}addUser(){this.formAddUser.addEventListener("submit",t=>{t.preventDefault();const e=this.formAddUser.querySelector("[data-js-add-user-login]"),s=this.formAddUser.querySelector("[data-js-add-user-password]");fetch("https://pdfcloud-server.onrender.com/api/admin/add-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.value,password:s.value})}).then(t=>t.json()).then(t=>{t.success&&alert("Пользователь успешно загружен в базу")}).catch(console.error)})}deleteUser(){this.formDeleteUser.addEventListener("submit",t=>{t.preventDefault();const e=this.formDeleteUser.querySelector("[data-js-input-delete-user]");fetch(`https://pdfcloud-server.onrender.com/api/admin/delete-user/${encodeURIComponent(e.value)}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{console.log(t),alert(t.message)}).catch(t=>{console.error("Ошибка:",t)})})}editUser(){this.formEditUser.addEventListener("submit",t=>{t.preventDefault();const e=this.formEditUser.querySelector("[data-js-edit-user-old]"),s=this.formEditUser.querySelector("[data-js-edit-user-login]"),o=this.formEditUser.querySelector("[data-js-edit-user-password]");fetch(`https://pdfcloud-server.onrender.com/api/admin/update-user/${encodeURIComponent(e.value)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newUsername:s.value||void 0,newPassword:o.value||void 0})}).then(t=>t.json()).then(t=>alert(t.message)).catch(console.error)})}search(){this.formAdminSearch.addEventListener("submit",t=>{t.preventDefault();const e=this.formAdminSearch.querySelector("[data-js-input-search]"),s=this.formAdminSearch.querySelector("[data-js-admin-search-out]");fetch(`https://pdfcloud-server.onrender.com/api/users/search?login=${encodeURIComponent(e.value)}`).then(t=>{if(!t.ok)throw new Error("Ошибка поиска");return t.json()}).then(t=>{0===t.length?(s.classList.add("_active"),s.innerHTML="Пользователь не найден"):(s.classList.add("_active"),s.innerHTML=`Пользователь найден. id: ${t[0].id} username: ${t[0].Username} password: ${t[0].password}`)}).catch(console.error)})}},new class{selectors={root:"[data-js-user]",logOut:"[data-js-user-log-out]"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&("true"!==localStorage.getItem("isUser")&&(window.location.href="/PDFCloud-frontend/build/index.html"),this.buttonLogOut=document.querySelector(this.selectors.logOut),this.logOut(),this.displayPDF())}logOut(){this.buttonLogOut.addEventListener("click",t=>{console.log(this.buttonLogOut),localStorage.removeItem("isUser"),window.location.href="/PDFCloud-frontend/build/index.html"})}renderIntroPDF(t){const e=this.rootElement.querySelector("[data-js-inner-pdf]");t.forEach(t=>{const o=`\n                    <article class="files__article">\n                        <a href="https://pdfcloud-server.onrender.com/api/pdf/${t.DocumentId}" class="files__box">\n                            <img class="files__image" src="${s}" alt="pdf document" width="120" height="120">\n                        </a>\n                        <h2><a href="https://pdfcloud-server.onrender.com/api/pdf/${t.DocumentId}" class="files__article-title" target="_blank">${t.FileName}</a></h2>\n                        <a href="https://pdfcloud-server.onrender.com/api/pdf/${t.DocumentId}" class="button button_red" target="_blank">View Document</a>\n                        <a href="https://pdfcloud-server.onrender.com/api/pdf/${t.DocumentId}/download" class="button button_red" target="_blank">Download</a>\n                    </article>`;e.insertAdjacentHTML("beforeend",o)})}displayPDF(){fetch("https://pdfcloud-server.onrender.com/api/documents").then(t=>{if(!t.ok)throw new Error("Ошибка при загрузке PDF");return t.json()}).then(t=>this.renderIntroPDF(t)).catch(console.error)}},new class{selectors={root:"[data-js-sign-up]",inputUsername:"[data-js-input-username]",inputPassword:"[data-js-input-password]",buttonSubmit:"[data-js-button]",error:"[data-js-error]"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.inputUsernameElement=this.rootElement.querySelector(this.selectors.inputUsername),this.inputPasswordElement=this.rootElement.querySelector(this.selectors.inputPassword),this.buttonSubmitElement=this.rootElement.querySelector(this.selectors.buttonSubmit),this.errorElement=this.rootElement.querySelector(this.selectors.error),this.signUp())}postData(t){fetch("https://pdfcloud-server.onrender.com/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>{if(!t.ok)throw new Error(`Ошибка: ${t.status}`);return t.json()}).then(t=>{console.log("Ответ от сервера:",t),t.id?alert("Регистрация выполнена успешно!"):alert("Ошибка регистрации!")}).catch(t=>{console.error("Ошибка при отправке:",t)})}clickButton=t=>{if(t.preventDefault(),this.inputUsernameElement.classList.remove("_error"),this.inputPasswordElement.classList.remove("_error"),this.errorElement.classList.remove("_active"),""===this.inputUsernameElement.value.trim())return this.inputUsernameElement.classList.add("_error"),void this.errorElement.classList.add("_active");if(""===this.inputPasswordElement.value.trim())return this.inputPasswordElement.classList.add("_error"),void this.errorElement.classList.add("_active");const e={username:this.inputUsernameElement.value,password:this.inputPasswordElement.value};this.postData(e)};signUp(){this.buttonSubmitElement.addEventListener("click",this.clickButton)}},new class{selectors={root:"[data-js-sign-in]",inputUsername:"[data-js-input-sign-in-username]",inputPassword:"[data-js-input-sign-in-password]",buttonSubmit:"[data-js-sign-in-button]"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.inputUsernameElement=this.rootElement.querySelector(this.selectors.inputUsername),this.inputPasswordElement=this.rootElement.querySelector(this.selectors.inputPassword),this.buttonSubmitElement=this.rootElement.querySelector(this.selectors.buttonSubmit),this.signUp())}postData(t){fetch("https://pdfcloud-server.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>{if(!t.ok)throw new Error(`Ошибка: ${t.status}`);return t.json()}).then(t=>{console.log("Ответ от сервера:",t),t.success?(alert("Вход выполнен успешно!"),localStorage.setItem("isUser","true"),window.location.href="/PDFCloud-frontend/build/dashboard.html"):alert("Ошибка: "+t.message)}).catch(t=>{console.error("Ошибка при отправке:",t)})}clickButton=t=>{t.preventDefault();const e={username:this.inputUsernameElement.value,password:this.inputPasswordElement.value};this.postData(e)};signUp(){this.buttonSubmitElement.addEventListener("click",this.clickButton)}},new class{constructor(){this.init()}init(){document.querySelectorAll(o).forEach(t=>new r(t))}}}();